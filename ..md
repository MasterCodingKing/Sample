# Barangay Management System

## Overview
A comprehensive digital solution for managing barangay operations, records, and services. This system streamlines administrative tasks, improves record-keeping, and enhances service delivery to residents.

---

# ğŸ›ï¸ Multi-Barangay Architecture (Multi-Tenant System)

## System Requirements for Multi-Barangay Setup
**5 Barangays, One System, One Database**

The system supports **multiple barangays** (5 barangays) while ensuring that **data does not mix** between them using **multi-tenant architecture (barangay-based separation)** within a **single database**.

The system runs as **one platform**, but each barangay will have its own:
- Residents
- Business records
- Permit applications
- Document requests
- Users (Admin/Staff)
- Reports
- Announcements
- Events

### âœ”ï¸ Key Requirement: `barangay_id` Column

Every table that stores barangay-specific data must include:
```
barangay_id
```

**Tables requiring `barangay_id`:**
- `residents`
- `businesses`
- `certificates`
- `users`
- `document_requests`
- `business_permits`
- `households`
- `announcements`
- `events`
- `incidents`
- `officials`

This ensures that **each barangay only sees their own data**.

---

## ğŸ‘¥ User Roles per Barangay

Each barangay has its own set of:
- **Barangay Admin** - Full access to their barangay data
- **Staff** - Limited access based on role
- **Residents** - Can request documents and view announcements

A user from Barangay 1 **cannot** access data from Barangay 2â€“5.

### How to Enforce Data Isolation:

Each user record contains:
```javascript
user.barangay_id
```

When the user logs in, the system filters all data by:
```sql
WHERE barangay_id = user.barangay_id
```

---

## ğŸ  Resident Module (Per Barangay)

Residents belong to one barangay via:
```javascript
residents.barangay_id
```

**Residents can only:**
- Access their own barangay Sangguniang Center
- Request documents from their own barangay
- View announcements and events of their barangay only

---

## ğŸ¢ Business Registry (Per Barangay)

Businesses must include:
```javascript
businesses.barangay_id
```

Each barangay manages **their own business permits**, separate from other barangays.

---

## ğŸ“„ Document & Certificate Module (Per Barangay)

Documents and certificates include:
```javascript
document_requests.barangay_id
certificates.barangay_id
```

**Each barangay issues its own:**
- Certificate of Residency
- Certificate of Indigency
- Business permits
- Barangay Clearances

No barangay can see documents from another barangay.

---

## ğŸ“Š Reports Module (Per Barangay)

Each barangay generates its own reports, filtered by:
```sql
WHERE barangay_id = user.barangay_id
```

### Resident Reports
- Residents belonging to that barangay
- Households inside that barangay

### Business Reports
- Only their businesses
- Only their permits
- Their own expiring permits
- Their own statistics

### Certificate Reports
- Certificates issued by them
- Requests coming to them

---

## ğŸ”” Notifications (Per Barangay)

Notifications are scoped by barangay:
- Staff of Barangay 1 only receives notifications for Barangay 1 data
- Barangay 2 staff cannot receive alerts about Barangay 3 residents

---

## ğŸ“ˆ Dashboard (Per Barangay)

When a staff/admin logs in, they see **only the counts and analytics for their barangay**:
- Number of residents
- Number of businesses
- Pending requests
- Expiring permits
- Recent activity logs

---

## ğŸ—„ï¸ Database Architecture (Single DB, Multi-Barangay)

ğŸŸ¦ **One database**
ğŸŸ¨ **Many tables**
â¤ï¸ **Every table linked to `barangay_id`**

### Example Table Structures:

#### barangays
| Column | Type | Description |
|--------|------|-------------|
| id | PK | Barangay ID |
| name | VARCHAR | Barangay name |
| address | VARCHAR | Full address |
| contact_number | VARCHAR | Office contact |
| email | VARCHAR | Official email |
| logo_url | VARCHAR | Barangay logo |
| created_at | TIMESTAMP | Record creation |

#### residents
| Column | Type | Description |
|--------|------|-------------|
| id | PK | Resident ID |
| name | VARCHAR | Full name |
| birthdate | DATE | Date of birth |
| **barangay_id** | FK | References barangays |

#### businesses
| Column | Type | Description |
|--------|------|-------------|
| id | PK | Business ID |
| business_name | VARCHAR | Business name |
| owner | VARCHAR | Owner name |
| **barangay_id** | FK | References barangays |

#### users
| Column | Type | Description |
|--------|------|-------------|
| id | PK | User ID |
| username | VARCHAR | Username |
| role | ENUM | User role |
| **barangay_id** | FK | References barangays |

#### document_requests
| Column | Type | Description |
|--------|------|-------------|
| id | PK | Request ID |
| resident_id | FK | References residents |
| type | VARCHAR | Document type |
| **barangay_id** | FK | References barangays |

#### business_permits
| Column | Type | Description |
|--------|------|-------------|
| id | PK | Permit ID |
| business_id | FK | References businesses |
| permit_no | VARCHAR | Permit number |
| **barangay_id** | FK | References barangays |

---

## ğŸ›¡ï¸ Security Rule: Data Filtering

**Every CRUD operation must include:**
```sql
WHERE barangay_id = current_user.barangay_id
```

This prevents cross-barangay data access.

### Sequelize Middleware Example:
```javascript
// middleware/barangayFilter.js
const barangayFilter = (req, res, next) => {
  // Attach barangay_id to all queries
  req.barangayScope = {
    where: {
      barangay_id: req.user.barangay_id
    }
  };
  next();
};

// In controller
const getResidents = async (req, res) => {
  const residents = await Resident.findAll({
    ...req.barangayScope,
    // other query options
  });
  res.json(residents);
};
```

---

## ğŸ§© Super Admin Role 

A **Super Admin** role can be added who:
- Can see all barangays' data
- Can manage barangays (add/edit/delete)
- Can generate system-wide reports
- Can manage all users across barangays

**Regular barangay staff cannot access Super Admin features.**

### Super Admin Detection:
```javascript
// Check if user is Super Admin
const isSuperAdmin = (user) => user.role === 'super_admin' && !user.barangay_id;

// Query modification
const getQueryScope = (user) => {
  if (isSuperAdmin(user)) {
    return {}; // No barangay filter - sees all data
  }
  return { where: { barangay_id: user.barangay_id } };
};
```

---

## ğŸ¯ Summary of Multi-Barangay Support

| Requirement | Implementation |
|-------------|----------------|
| âœ” Add `barangay_id` to all major tables | Foreign key to barangays table |
| âœ” Filter all views/controllers | `WHERE barangay_id = current_user.barangay_id` |
| âœ” Each barangay sees only their data | Middleware-based filtering |
| âœ” Shared system, isolated data | Multi-tenant architecture |
| âœ” Super admin can see all | Role-based bypass for filtering |

---

## Features

### 1. Resident Management
- **Resident Registration**
  - Personal information (name, age, gender, civil status)
  - Contact details
  - Address information
  - Family composition
  - ID photo upload
- **Household Profiling**
  - Household head information
  - Family members listing
  - Economic status
  - Housing information
- **Resident Records**
  - Search and filter capabilities
  - Update and archive records
  - Generate resident reports

### 2. Document Management
- **Certificate Issuance**
  - Barangay Clearance
  - Certificate of Residency
  - Certificate of Indigency
  - Business Permit
  - Certificate of Good Moral Character
- **Document Tracking**
  - Request status monitoring
  - Document history
  - Digital signatures
- **Templates Management**
  - Customizable document templates
  - Automated form filling

### 3. Officials Management
- **Officials Directory**
  - Current barangay officials
  - Position and contact information
  - Term of office
- **Committee Management**
  - Committee assignments
  - Roles and responsibilities
- **Staff Directory**
  - Barangay staff information
  - Work schedules

### 4. Incident/Complaint Management
- **Incident Reporting**
  - Log incidents and complaints
  - Incident categorization
  - Date and time logging
  - Involved parties information
- **Case Management**
  - Case tracking
  - Resolution status
  - Settlement agreements
  - Mediation records
- **Blotter System**
  - Chronological incident log
  - Search and filter functionality
  - Generate blotter reports

### 5. Financial Management
- **Revenue Tracking**
  - Collection records
  - Receipt generation
  - Revenue sources monitoring
- **Expense Management**
  - Budget allocation
  - Expense recording
  - Financial reports
- **Permit and Fee Collection**
  - Business permit fees
  - Clearance fees
  - Other service fees

### 6. Event and Announcement Management
- **Events Calendar**
  - Schedule barangay events
  - Community activities
  - Meeting schedules
- **Announcements**
  - Public announcements
  - Emergency alerts
  - Community bulletins
- **Notifications**
  - SMS/Email notifications
  - Push notifications

### 7. Health Management
- **Health Records**
  - Resident health profiles
  - Vaccination records
  - Medical history
- **Health Programs**
  - Program scheduling
  - Beneficiary tracking
  - Health statistics
- **Pandemic Response**
  - Contact tracing
  - Quarantine monitoring
  - Health declarations

### 8. Reports and Analytics
- **Population Statistics**
  - Demographics reports
  - Age distribution
  - Gender statistics
- **Document Statistics**
  - Certificates issued
  - Revenue generated
- **Custom Reports**
  - Exportable reports (PDF, Excel)
  - Data visualization
  - Trend analysis

### 9. User Management
- **Role-Based Access Control**
  - Admin
  - Staff
  - Secretary
  - Treasurer
  - Captain
- **User Accounts**
  - Account creation and management
  - Password management
  - Activity logs
- **Audit Trail**
  - User activity tracking
  - System changes log

## Technology Stack

### Frontend
- **React with Vite**
  - React 18+
  - Vite for fast development and build
  - React Router for navigation
  - Axios for API calls
  - React Hook Form for form handling
- **TailwindCSS**
  - Utility-first CSS framework
  - Responsive design
  - Custom theme configuration
  - Headless UI components

### Backend
- **Node.js + Express**
  - Express.js framework
  - RESTful API architecture
  - Middleware for validation
  - CORS configuration
  - Express validator
- **Sequelize ORM**
  - MySQL database connection
  - Model definitions
  - Migrations and seeders
  - Associations and relationships
  - Query optimization

### Authentication & Security
- **JWT (JSON Web Tokens)**
  - User authentication
  - Admin authentication
  - Token-based sessions
  - Refresh token mechanism
  - Role-based access control
- **Security Packages**
  - bcrypt for password hashing
  - helmet for security headers
  - express-rate-limit for rate limiting

### Communication
- **Nodemailer**
  - Contact form submissions
  - Email notifications
  - Certificate delivery
  - Account verification
  - Password reset emails
  - Event announcements

### Additional Technologies
- **File Storage**
  - Multer for file uploads
  - Local storage / Cloud storage (AWS S3, Cloudinary)
- **Reporting**
  - jsPDF for PDF generation
  - ExcelJS for Excel exports
- **Additional Services**
  - SMS API (Twilio, Semaphore) - Optional
  - Date handling (date-fns / moment.js)
  - UUID for unique identifiers

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client Layer                          â”‚
â”‚  (Web Browser - Responsive Interface)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ HTTPS
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Application Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ API Gateway  â”‚  â”‚ Auth Service â”‚  â”‚ File Service â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Resident Svc â”‚  â”‚ Document Svc â”‚  â”‚ Report Svc   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Data Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Database   â”‚  â”‚ File Storage â”‚  â”‚    Cache     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database Schema

## Package Dependencies

### Backend (package.json)
```json
{
  "dependencies": {
    "express": "^4.18.2",
    "sequelize": "^6.35.0",
    "mysql2": "^3.6.5",
    "jsonwebtoken": "^9.0.2",
    "bcryptjs": "^2.4.3",
    "nodemailer": "^6.9.7",
    "dotenv": "^16.3.1",
    "cors": "^2.8.5",
    "helmet": "^7.1.0",
    "express-validator": "^7.0.1",
    "express-rate-limit": "^7.1.5",
    "multer": "^1.4.5-lts.1",
    "uuid": "^9.0.1",
    "jspdf": "^2.5.1",
    "exceljs": "^4.4.0",
    "date-fns": "^2.30.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.2",
    "sequelize-cli": "^6.6.2"
  }
}
```

### Frontend (package.json)
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.1",
    "axios": "^1.6.2",
    "react-hook-form": "^7.49.2",
    "@headlessui/react": "^1.7.17",
    "@heroicons/react": "^2.1.1",
    "date-fns": "^2.30.0",
    "jspdf": "^2.5.1",
    "react-hot-toast": "^2.4.1"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.1",
    "vite": "^5.0.8",
    "tailwindcss": "^3.3.6",
    "postcss": "^8.4.32",
    "autoprefixer": "^10.4.16"
  }
}
```

## Database Schema (Sequelize Models)

### Key Tables

#### barangays
- id (PK)
- name
- address
- municipality
- province
- contact_number
- email
- logo_url
- captain_name
- is_active
- created_at
- updated_at

#### residents
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- first_name
- middle_name
- last_name
- date_of_birth
- gender
- civil_status
- contact_number
- email
- address
- household_id (FK)
- photo_url
- created_at
- updated_at

#### households
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- household_number
- head_id (FK to residents)
- address
- zone_purok
- housing_type
- economic_status
- created_at
- updated_at

#### documents
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- resident_id (FK)
- document_type
- purpose
- issued_by
- issued_date
- or_number
- amount_paid
- status
- document_url
- created_at
- updated_at

#### officials
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- resident_id (FK)
- position
- committee
- term_start
- term_end
- status
- created_at
- updated_at

#### incidents
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- incident_type
- incident_date
- location
- description
- complainant_id (FK)
- respondent_id (FK)
- status
- resolution
- settled_date
- created_by
- created_at
- updated_at

#### users
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key (NULL for Super Admin)
- username
- password_hash
- email
- role (super_admin, admin, captain, secretary, treasurer, staff, resident)
- resident_id (FK)
- is_active
- last_login
- created_at
- updated_at

#### businesses
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- business_name
- owner_name
- owner_id (FK to residents)
- business_type
- address
- contact_number
- status
- created_at
- updated_at

#### business_permits
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- business_id (FK)
- permit_number
- issued_date
- expiry_date
- amount_paid
- or_number
- status
- issued_by
- created_at
- updated_at

#### announcements
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- title
- content
- category
- is_published
- published_at
- created_by
- created_at
- updated_at

#### events
- id (PK)
- **barangay_id (FK)** â† Multi-tenant key
- title
- description
- event_date
- start_time
- end_time
- location
- status
- created_by
- created_at
- updated_at

## Security Features

### Authentication & Authorization
- Secure login system
- Password encryption (bcrypt/Argon2)
- Role-based access control
- Session management
- Auto-logout on inactivity

### Data Security
- SQL injection prevention
- XSS protection
- CSRF tokens
- Input validation and sanitization
- Encrypted sensitive data

### Backup & Recovery
- Automated daily backups
- Database replication
- Disaster recovery plan
- Data archiving

## Installation & Setup

### Prerequisites
- Node.js 18+ and npm/yarn
- MySQL 8.0+
- Git

### Backend Setup

1. **Clone the repository**
```bash
git clone <repository-url>
cd barangay-management-system
```

2. **Install backend dependencies**
```bash
cd backend
npm install
```

3. **Configure environment variables**

Create `.env` file in the backend directory:

```env
# Server Configuration
PORT=5000
NODE_ENV=development

# Database Configuration
DB_HOST=localhost
DB_PORT=3306
DB_NAME=barangay_db
DB_USER=root
DB_PASSWORD=your_password
DB_DIALECT=mysql

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRE=7d
JWT_REFRESH_SECRET=your_refresh_token_secret
JWT_REFRESH_EXPIRE=30d

# Email Configuration (Nodemailer)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_password
EMAIL_FROM=Barangay System <noreply@barangay.gov.ph>

# File Upload
MAX_FILE_SIZE=5242880
UPLOAD_PATH=./uploads

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:5173

# Optional: SMS API
SMS_API_KEY=
SMS_SENDER_NAME=
```

4. **Create MySQL database**
```sql
CREATE DATABASE barangay_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

5. **Run database migrations**
```bash
npx sequelize-cli db:migrate
```

6. **Seed initial data (optional)**
```bash
npx sequelize-cli db:seed:all
```

7. **Start backend server**
```bash
npm run dev
# Server will run on http://localhost:5000
```

### Frontend Setup

1. **Install frontend dependencies**
```bash
cd ../frontend
npm install
```

2. **Configure environment variables**

Create `.env` file in the frontend directory:

```env
VITE_API_URL=http://localhost:5000/api
VITE_APP_NAME=Barangay Management System
```

3. **Start development server**
```bash
npm run dev
# Application will run on http://localhost:5173
```

### Production Build

**Frontend:**
```bash
cd frontend
npm run build
# Build files will be in dist/ folder
```

**Backend:**
```bash
cd backend
npm start
# Runs production server
```

## User Roles & Permissions

### Super Admin (System-Wide)
- Full system access across ALL barangays
- Barangay management (add/edit/delete barangays)
- System-wide reports and analytics
- Manage all users across barangays
- System configuration and settings
- **Note:** `barangay_id = NULL` for super admin users

### Admin (Per Barangay)
- Full access to their barangay data ONLY
- User management within their barangay
- Barangay configuration
- All CRUD operations for their barangay

### Barangay Captain (Per Barangay)
- View all records within their barangay
- Approve documents
- Financial oversight
- Reports access

### Secretary (Per Barangay)
- Resident management
- Document issuance
- Records management
- Report generation

### Treasurer (Per Barangay)
- Financial management
- Revenue tracking
- Receipt generation
- Financial reports

### Staff (Per Barangay)
- Basic resident lookup
- Document request processing
- Data entry
- Limited reports access

#### Staff User Controls (Detailed Permissions)

| Module | View | Create | Edit | Delete | Approve |
|--------|------|--------|------|--------|---------|
| **Residents** | âœ… Own barangay | âœ… | âœ… | âŒ | âŒ |
| **Households** | âœ… Own barangay | âœ… | âœ… | âŒ | âŒ |
| **Document Requests** | âœ… Own barangay | âœ… | âœ… Status only | âŒ | âŒ |
| **Certificates** | âœ… Own barangay | âœ… Issue | âŒ | âŒ | âŒ |
| **Businesses** | âœ… Own barangay | âœ… | âœ… | âŒ | âŒ |
| **Business Permits** | âœ… Own barangay | âŒ | âŒ | âŒ | âŒ |
| **Incidents/Blotter** | âœ… Own barangay | âœ… | âœ… | âŒ | âŒ |
| **Officials** | âœ… View only | âŒ | âŒ | âŒ | âŒ |
| **Announcements** | âœ… Own barangay | âŒ | âŒ | âŒ | âŒ |
| **Events** | âœ… Own barangay | âŒ | âŒ | âŒ | âŒ |
| **Reports** | âœ… Basic only | âŒ | âŒ | âŒ | âŒ |
| **Users** | âŒ | âŒ | âŒ | âŒ | âŒ |
| **Settings** | âŒ | âŒ | âŒ | âŒ | âŒ |

#### Staff Restrictions:
- âŒ Cannot delete any records
- âŒ Cannot approve documents or permits
- âŒ Cannot manage users
- âŒ Cannot access system settings
- âŒ Cannot view financial reports
- âŒ Cannot export sensitive data
- âœ… Can only view/edit data within their assigned barangay

#### Staff Allowed Actions:
```javascript
const staffPermissions = {
  residents: ['view', 'create', 'edit'],
  households: ['view', 'create', 'edit'],
  documentRequests: ['view', 'create', 'updateStatus'],
  certificates: ['view', 'issue'],
  businesses: ['view', 'create', 'edit'],
  businessPermits: ['view'],
  incidents: ['view', 'create', 'edit'],
  officials: ['view'],
  announcements: ['view'],
  events: ['view'],
  reports: ['viewBasic'],
  users: [],
  settings: []
};
```

### Resident (Per Barangay)
- View own profile
- Request documents
- View announcements and events
- Track document requests

## Project Structure

```
barangay-management-system/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ database.js          # Sequelize configuration
â”‚   â”‚   â””â”€â”€ email.js             # Nodemailer configuration
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”œâ”€â”€ residentController.js
â”‚   â”‚   â”œâ”€â”€ documentController.js
â”‚   â”‚   â”œâ”€â”€ incidentController.js
â”‚   â”‚   â””â”€â”€ reportController.js
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.js              # JWT verification
â”‚   â”‚   â”œâ”€â”€ roleCheck.js         # Role-based access
â”‚   â”‚   â”œâ”€â”€ upload.js            # Multer configuration
â”‚   â”‚   â””â”€â”€ validator.js         # Request validation
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ index.js             # Sequelize initialization
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”œâ”€â”€ Resident.js
â”‚   â”‚   â”œâ”€â”€ Household.js
â”‚   â”‚   â”œâ”€â”€ Document.js
â”‚   â”‚   â”œâ”€â”€ Official.js
â”‚   â”‚   â””â”€â”€ Incident.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ residents.js
â”‚   â”‚   â”œâ”€â”€ documents.js
â”‚   â”‚   â”œâ”€â”€ incidents.js
â”‚   â”‚   â””â”€â”€ reports.js
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ emailService.js      # Nodemailer templates
â”‚   â”‚   â”œâ”€â”€ pdfService.js        # PDF generation
â”‚   â”‚   â””â”€â”€ uploadService.js     # File handling
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ jwt.js               # Token generation/verification
â”‚   â”‚   â”œâ”€â”€ helpers.js
â”‚   â”‚   â””â”€â”€ logger.js
â”‚   â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ seeders/
â”‚   â”œâ”€â”€ uploads/
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ .sequelizerc
â”‚   â”œâ”€â”€ server.js                # Express app entry
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ axios.js         # Axios instance with JWT
â”‚   â”‚   â”‚   â””â”€â”€ endpoints.js     # API endpoints
â”‚   â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Modal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ forms/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResidentForm.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DocumentForm.jsx
â”‚   â”‚   â”‚   â””â”€â”€ tables/
â”‚   â”‚   â”‚       â””â”€â”€ DataTable.jsx
â”‚   â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.jsx  # JWT auth state
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.js
â”‚   â”‚   â”‚   â””â”€â”€ useApi.js
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â”œâ”€â”€ MainLayout.jsx
â”‚   â”‚   â”‚   â””â”€â”€ AuthLayout.jsx
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ForgotPassword.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Dashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ residents/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResidentList.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResidentDetails.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AddResident.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ documents/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentList.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ IssueDocument.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ incidents/
â”‚   â”‚   â”‚   â””â”€â”€ reports/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ residentService.js
â”‚   â”‚   â”‚   â””â”€â”€ documentService.js
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.js
â”‚   â”‚   â”‚   â””â”€â”€ formatters.js
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ main.jsx
â”‚   â”‚   â””â”€â”€ index.css            # TailwindCSS imports
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ postcss.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ vite.config.js
â”‚
â””â”€â”€ README.md
```

## API Endpoints

### Authentication (JWT)
- `POST /api/auth/register` - Register new user
- `POST /api/auth/login` - User login (returns JWT)
- `POST /api/auth/logout` - User logout
- `POST /api/auth/refresh-token` - Refresh JWT token
- `POST /api/auth/forgot-password` - Request password reset (Nodemailer)
- `POST /api/auth/reset-password/:token` - Reset password
- `GET /api/auth/verify-email/:token` - Verify email (Nodemailer)
- `GET /api/auth/me` - Get current user (JWT protected)

### Residents
- `GET /api/residents` - Get all residents (paginated)
- `GET /api/residents/:id` - Get resident details
- `POST /api/residents` - Create new resident
- `PUT /api/residents/:id` - Update resident
- `DELETE /api/residents/:id` - Delete resident
- `GET /api/residents/search?q=` - Search residents
- `POST /api/residents/:id/upload-photo` - Upload resident photo

### Households
- `GET /api/households` - Get all households
- `GET /api/households/:id` - Get household details
- `POST /api/households` - Create household
- `PUT /api/households/:id` - Update household
- `GET /api/households/:id/members` - Get household members

### Documents
- `GET /api/documents` - Get all documents
- `GET /api/documents/:id` - Get document details
- `POST /api/documents` - Request new document (sends email notification)
- `PUT /api/documents/:id` - Update document
- `PUT /api/documents/:id/status` - Update document status (sends email)
- `GET /api/documents/:id/download` - Download document PDF
- `DELETE /api/documents/:id` - Delete document

### Officials
- `GET /api/officials` - Get all barangay officials
- `GET /api/officials/:id` - Get official details
- `POST /api/officials` - Add new official
- `PUT /api/officials/:id` - Update official
- `DELETE /api/officials/:id` - Remove official

### Incidents/Blotter
- `GET /api/incidents` - Get all incidents
- `GET /api/incidents/:id` - Get incident details
- `POST /api/incidents` - Create incident report (sends email notification)
- `PUT /api/incidents/:id` - Update incident
- `PUT /api/incidents/:id/resolve` - Resolve incident (sends email)
- `DELETE /api/incidents/:id` - Delete incident

### Reports
- `GET /api/reports/population` - Population report
- `GET /api/reports/documents` - Document statistics
- `GET /api/reports/financial` - Financial report
- `GET /api/reports/incidents` - Incident statistics
- `GET /api/reports/export/pdf` - Export report as PDF
- `GET /api/reports/export/excel` - Export report as Excel

### Contact/Notifications
- `POST /api/contact` - Submit contact form (Nodemailer)
- `POST /api/notifications/send-bulk` - Send bulk email notifications
- `POST /api/notifications/announcement` - Send announcement emails

## Future Enhancements

### Phase 2
- Mobile application (Android/iOS)
- QR code integration for documents
- Online payment integration
- Real-time chat support
- Geographic Information System (GIS) mapping

### Phase 3
- AI-powered analytics
- Predictive modeling for resource allocation
- Blockchain for document verification
- IoT integration for smart barangay
- Multi-language support

## Support & Maintenance

### Regular Maintenance
- Weekly database backups
- Monthly security updates
- Quarterly feature updates
- Annual system audit

### Technical Support
- User training and documentation
- Help desk support
- Bug fixes and patches
- System monitoring

## License
Specify your license here (MIT, GPL, Proprietary, etc.)

## Contributors
List of contributors and development team

## Contact Information
- **Barangay Office**: [Contact details]
- **Technical Support**: [Email/Phone]
- **Emergency Hotline**: [Contact number]

---

**Version**: 1.0.0  
**Last Updated**: December 1, 2025  
**Developed by**: JERIC & CHRISTIAN
